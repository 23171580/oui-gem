#!/usr/bin/env ruby
# coding: utf-8

require "oui"

def generate_yml
  File.open('data/oui.txt') do |file|
    companies = {}

    file.each_line do |line|
      companies.default = 0

      if line =~ OUI::MACAddress.oui_regex
        line =~ /\(hex\)\s+(.+)/
        companies[$1] += 1
      end
    end

    names = Hash[companies.sort_by { |k,v| -v }[0..999]]
    names.each { |k,_| names[k] = k }

    require "yaml"

    File.write('data/translations.yml', names.to_yaml)
  end
end

mac = ARGV.first

p OUI::MACAddress.parse(mac).organization
